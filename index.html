<!DOCTYPE html>
<html>
    <body>
        <script>
            function computerPlay() {
                let num = Math.floor(Math.random() * 3);
                if (num == 0) {
                    return "rock"
                }
                else if (num == 1) {
                    return "paper"
                }
                else {
                    return "scissors"
                }
            }

            function getWin(play, comp) { //Calculates a if player won or lost as there's no draw
                if (play=="rock" && comp=="scissors"||play=="scissors" && comp== "paper" || play=="paper" && comp=="rock") {
                    return "win"
                }
                else {
                    return "loss"
                }
            }


            function getResult (player, computer) {//Checks if the Result is a draw, and if not sends to the get win function
                if (player==computer) {
                    return "draw"
                }

                else {
                    return getWin(player, computer)
                }
            }

            function outputText (player, computer) {//Gets the result and feeds the text into game function
                if (getResult(player, computer)=="win") {
                    return ("You win! Because " + player + " beats " + computer + "!")
                }
                else if (getResult(player, computer)=="draw") {
                    return ("A draw! Because both of you had " + player + "!")
                }
                else {
                    return ("You lose! Because " + computer + " beats " + player + "!")
                }
            }

            function singleGame (playerSelection, computerSelection) { //The final function. Verifies correct word (after lowercasing) and sends to output text function
                playerSelection = playerSelection.toLowerCase();
                if (playerSelection=="scissors"||playerSelection=="rock"||playerSelection=="paper") {
                    return outputText(playerSelection, computerSelection)
                }
                else {
                    
                    return ("Do you know how to play this game!?")
                }
                
                
            }

            function game() {
                let i = 0;
                let wins = 0;
                let losses = 0;
                for (i=0; i<5; i++) {
                    computerSelection=computerPlay();
                    playerSelection=prompt("Rock, paper or scissors?");
                    playerSelection = playerSelection.toLowerCase();
                    
                    if (getResult(playerSelection, computerSelection)=="win") {
                        wins++;
                    }

                    if (getResult(playerSelection, computerSelection)=="loss") {
                        losses++;
                    }

                    alert("You selected " + playerSelection + " and Computer selected " + computerSelection + "\n" +
                        singleGame(playerSelection, computerSelection) + "\n" +
                        "The current score is " + wins +  " wins and " + losses + " losses! You\'ve played " + (i+1) + " games.")
                }
            }



        </script>
    </body>
</html>